function initialize(){geocoder=new google.maps.Geocoder,directionsDisplay=new google.maps.DirectionsRenderer({draggable:!0}),directionsService=new google.maps.DirectionsService;var e={center:new google.maps.LatLng(nooGoogleMap.latitude,nooGoogleMap.longitude),zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("noo_property_google_map"),e);var o=document.getElementById("noo_property_google_map_search_input");autocomplete=new google.maps.places.Autocomplete(o),autocomplete.bindTo("bounds",map),infowindow=new google.maps.InfoWindow({position:map.getCenter()}),directionsDisplay.setMap(map),directionsDisplay.setPanel(document.getElementById("route")),infowindow=new google.maps.InfoWindow({position:map.getCenter()}),marker=new google.maps.Marker({map:map,position:new google.maps.LatLng(nooGoogleMap.latitude,nooGoogleMap.longitude),draggable:!0}),google.maps.event.addListener(map,"click",function(e){marker.setPosition(e.latLng),getMap(marker)}),google.maps.event.addListener(autocomplete,"place_changed",function(){infowindow.close();var e=autocomplete.getPlace();if(e&&e.geometry){e.geometry.viewport?map.fitBounds(e.geometry.viewport):(map.setCenter(e.geometry.location),map.setZoom(17)),marker.setPosition(e.geometry.location);var o="";e.address_components&&(o=[e.address_components[0]&&e.address_components[0].short_name||"",e.address_components[1]&&e.address_components[1].short_name||"",e.address_components[2]&&e.address_components[2].short_name||""].join(", ")),infowindow.setContent("<strong>"+e.name+"</strong><br>"+o),infowindow.open(map,marker),document.getElementById("_noo_property_gmap_latitude").value=e.geometry.location.lat(),document.getElementById("_noo_property_gmap_longitude").value=e.geometry.location.lng()}}),google.maps.event.addListener(map,"idle",function(){google.maps.event.trigger(map,"resize")}),drag(marker)}function setupClickListener(e,o){var n=document.getElementById(e);google.maps.event.addDomListener(n,"click",function(){autocomplete.setTypes(o)})}function clearOverlays(){marker.setMap(null),marker=null}function drag(e){google.maps.event.addListener(e,"drag",function(){getMap(e)})}function getMap(e){geocoder.geocode({latLng:e.getPosition()},function(o,n){if(n==google.maps.GeocoderStatus.OK&&o[1]){var t=o[0].formatted_address;infowindow.setContent(t),infowindow.open(map,e),document.getElementById("_noo_property_gmap_latitude").value=e.getPosition().lat(),document.getElementById("_noo_property_gmap_longitude").value=e.getPosition().lng()}})}jQuery("#noo_property_google_map_search_input").bind("keypress keydown keyup",function(e){13==e.keyCode&&e.preventDefault()}),google.maps.event.addDomListener(window,"load",initialize);var geocoder,map,infowindow,marker,autocomplete,directionsDisplay,directionsService;